import"./index-bbd4c2f5.js";const h=""+new URL("../images/Fog.svg",import.meta.url).href,I=""+new URL("../images/Broken-Cloudy.svg",import.meta.url).href,f=""+new URL("../images/Rain_Sun.svg",import.meta.url).href,S=""+new URL("../images/Shower-Rain_Sun.svg",import.meta.url).href,x=""+new URL("../images/Snow.svg",import.meta.url).href,C=""+new URL("../images/Thunderstorm.svg",import.meta.url).href,g=""+new URL("../images/Sunny.svg",import.meta.url).href,p=""+new URL("../images/clear.png",import.meta.url).href,L=""+new URL("../images/cloudNight.png",import.meta.url).href,R=""+new URL("../images/cloudy.png",import.meta.url).href,B=""+new URL("../images/mist.png",import.meta.url).href,E=""+new URL("../images/night.png",import.meta.url).href,v=""+new URL("../images/rain.png",import.meta.url).href,U=""+new URL("../images/snow.png",import.meta.url).href,q=""+new URL("../images/thunderstrom.png",import.meta.url).href,z="43e478e4b6fc474ab08164231252508",b="https://api.weatherapi.com/v1",o={maxTemp:document.getElementById("max-temp"),minTemp:document.getElementById("min-temp"),humidity:document.getElementById("humadity"),cloudy:document.getElementById("cloudy"),wind:document.getElementById("wind"),condition:document.querySelector(".today-weather__details-state"),currentTemp:document.querySelector(".fixed-data__temp"),cityName:document.querySelector(".fixed-data__info-city"),currentTime:document.querySelector(".fixed-data__info-time"),bgImage:document.querySelector(".body__bg"),fixDataImage:document.querySelector(".fixed-data__img"),forecastTemp:document.querySelectorAll(".today-weather__forecast-temp"),forecastCondition:document.querySelectorAll(".today-weather__forecast-what"),forecastTime:document.querySelectorAll(".today-weather__forecast-time"),forecastImages:document.querySelectorAll(".today-weather__forecast-img")},a={cloudy:I,mist:h,fog:h,rain:f,drizzle:f,heavy:S,snow:x,sunny:g,clear:g,thunder:C},c={clear:p,cloudNight:L,cloudy:R,mist:B,night:E,rain:v,snow:U,thunder:q},k=n=>n>=21||n<=4,D=(n,e)=>`${n.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`,w=n=>{const e=n.toLowerCase();return e.includes("cloudy")||e.includes("overcast")?a.cloudy:e.includes("mist")||e.includes("fog")?a.mist:(e.includes("rain")||e.includes("drizzle"))&&!e.includes("thunder")?a.rain:e.includes("heavy")&&!e.includes("snow")?a.heavy:e.includes("snow")||e.includes("blizzard")||e.includes("ice")?a.snow:e.includes("thunder")?a.thunder:e.includes("sunny")||e.includes("clear")?a.clear:g},H=(n,e)=>{const t=n.toLowerCase();return e&&t.includes("clear")?c.night:e&&(t.includes("cloudy")||t.includes("overcast"))?c.cloudNight:t.includes("sunny")||t.includes("clear")?c.clear:t.includes("mist")||t.includes("fog")?c.mist:t.includes("cloudy")||t.includes("overcast")?c.cloudy:(t.includes("rain")||t.includes("drizzle"))&&!t.includes("thunder")?c.rain:t.includes("thunder")?c.thunder:t.includes("snow")||t.includes("blizzard")||t.includes("ice")?c.snow:p};async function $(n){try{const e=await fetch(`${b}/forecast.json?key=${z}&q=${n}&days=2&aqi=no`);if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const t=await e.json(),r=t.current,m=t.forecast.forecastday[0],i=t.location,u=N(t.forecast.forecastday,i.localtime);return{current:{temp:`${r.temp_c}Â°`,humidity:`${r.humidity}%`,cloud:`${r.cloud}%`,wind:`${r.wind_kph} km/h`,condition:r.condition.text},today:{maxTemp:m.day.maxtemp_c,minTemp:m.day.mintemp_c},location:{name:i.name,timezone:i.tz_id,localtime:i.localtime},hourlyForecast:u}}catch(e){throw console.error("Error fetching weather data:",e),e}}function N(n,e){const t=new Date(e),r=t.getHours(),m=t.getMinutes(),i=[],u=[...n[0].hour,...n[1]?n[1].hour:[]],_=u.findIndex(s=>new Date(s.time).getHours()===r);for(let s=0;s<8;s++){const d=_+3*(s+1);if(d>=u.length)break;const l=u[d],T=new Date(l.time);i.push({time:D(T.getHours(),m),temp:l.temp_c,condition:l.condition.text})}return i}async function y(n){try{const e=await $(n);o.maxTemp.textContent=e.today.maxTemp,o.minTemp.textContent=e.today.minTemp,o.humidity.textContent=e.current.humidity,o.cloudy.textContent=e.current.cloud,o.wind.textContent=e.current.wind,o.condition.textContent=e.current.condition,o.currentTemp.textContent=e.current.temp,o.cityName.textContent=e.location.name,A(e.location.localtime);const t=k(new Date(e.location.localtime).getHours());o.fixDataImage.src=w(e.current.condition),o.bgImage.style.backgroundImage=`url(${H(e.current.condition,t)})`,F(e.hourlyForecast)}catch(e){console.error("Error displaying weather:",e)}}function A(n){const e=new Date(n),t={weekday:"long",year:"2-digit",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};o.currentTime.textContent=e.toLocaleDateString("en-EN",t)}function F(n){n.forEach((e,t)=>{o.forecastTemp[t]&&(o.forecastTemp[t].textContent=e.temp),o.forecastCondition[t]&&(o.forecastCondition[t].textContent=e.condition),o.forecastTime[t]&&(o.forecastTime[t].textContent=e.time),o.forecastImages[t]&&(o.forecastImages[t].src=w(e.condition))})}document.addEventListener("DOMContentLoaded",function(){let n="Moscow";const e=document.getElementById("citySelect");let t;e.addEventListener("change",function(r){clearTimeout(t),t=setTimeout(()=>{n=r.target.value,y(n)},300)}),y(n)});
