import"./index-bbd4c2f5.js";const E=""+new URL("../images/Fog.svg",import.meta.url).href,H=""+new URL("../images/Broken-Cloudy.svg",import.meta.url).href,b=""+new URL("../images/Rain_Sun.svg",import.meta.url).href,C=""+new URL("../images/Shower-Rain_Sun.svg",import.meta.url).href,S=""+new URL("../images/Snow.svg",import.meta.url).href,M=""+new URL("../images/Thunderstorm.svg",import.meta.url).href,R=""+new URL("../images/Sunny.svg",import.meta.url).href,N=""+new URL("../images/clear.png",import.meta.url).href,U=""+new URL("../images/cloudNight.png",import.meta.url).href,P=""+new URL("../images/cloudy.png",import.meta.url).href,q=""+new URL("../images/mist.png",import.meta.url).href,z=""+new URL("../images/night.png",import.meta.url).href,x=""+new URL("../images/rain.png",import.meta.url).href,D=""+new URL("../images/snow.png",import.meta.url).href,F=""+new URL("../images/thunderstrom.png",import.meta.url).href;function A(a){const n=fetch(`https://api.weatherapi.com/v1/forecast.json?key=43e478e4b6fc474ab08164231252508&q=${a}&days=7&aqi=no`).then(t=>{if(!t.ok)throw new Error(`HTTP ошибка! Код: ${t.status}`);return t.json()}).then(t=>{function m(r){switch(r){case"London":return"Europe/London";case"Moscow":return"Europe/Moscow";case"Tokyo":return"Asia/Tokyo";case"Saint-Petersburg":return"Europe/Moscow";case"Paris":return"Europe/Paris";case"New-york":return"America/New_York"}}function v(r){const i={timeZone:r,hour12:!1,hour:"2-digit",minute:"2-digit"};return new Intl.DateTimeFormat("ru-RU",i).format(new Date)}const h=v(m(`${a}`)),w=Number(h.slice(0,2)),p=Number(h.slice(3,5)),l=t.forecast.forecastday,f=l[0].hour,g=l[1].hour,s=w+3,u=()=>l.map(r=>r.day.maxtemp_c),T=()=>l.map(r=>r.day.mintemp_c),I=()=>{const r=[],i=[...f,...g];for(let e=s;e<48;e+=3)if(r.push(i[e].temp_c),r.length===8)return r;return r},_=()=>{const r=[],i=[...f,...g];for(let e=s;e<48;e+=3)if(r.push(i[e].condition.text),r.length===8)return r;return r};function $(){const r=[];for(let i=s;i<48;i+=3)if(r.push(i),r.length===8)return r.map(e=>e>24?e-24:e)}return{weekMax:u(),weekMin:T(),everyThreeHours:I(),everyThreeHoursCondition:_(),weatherForecastTime:$(),minNow:p,currentCityTime:h,getTimeZone:m(a),hourNow:w}}),d=fetch(`https://api.weatherapi.com/v1/current.json?key=43e478e4b6fc474ab08164231252508&q=${a}&aqi=no`).then(t=>{if(!t.ok)throw new Error(`HTTP ошибка! Код: ${t.status}`);return t.json()}).then(t=>({current:`${t.current.temp_c}°`,humidityPercent:`${t.current.humidity}%`,cloudPercent:`${t.current.cloud}%`,windSpeed:`${t.current.wind_kph} km/h`,condition:t.current.condition.text}));return Promise.all([n,d]).then(([t,m])=>({...t,...m})).catch(t=>{throw console.error("Ошибка при выполнении запроса:",t),t})}async function B(a){try{let I=function(){const e=g.toLowerCase();e.includes("cloudy")||e.includes("overcast")?u.src=H:e.includes("mist")||e.includes("fog")?u.src=E:(e.includes("rain")||e.includes("drizzle"))&&!e.includes("thunder")&&!e.includes("heavy")?u.src=b:e.includes("heavy")&&!e.includes("snow")?u.src=C:e.includes("snow")||e.includes("blizzard")||e.includes("ice")||e.includes("sleet")?u.src=S:e.includes("sunny")||e.includes("clear")?u.src=R:e.includes("thunder")&&(u.src=M)},_=function(){t.forEach((e,c)=>{p[c]&&(e.innerHTML=p[c])}),m.forEach((e,c)=>{l[c]&&(e.innerHTML=l[c])}),v.forEach((e,c)=>{f[c]&&(e.innerHTML=f[c])}),w.forEach((e,c)=>{const o=l[c].toLowerCase();o.includes("cloudy")||o.includes("overcast")?e.src=H:o.includes("mist")||o.includes("fog")?e.src=E:(o.includes("rain")||o.includes("drizzle"))&&!o.includes("thunder")&&!o.includes("heavy")?e.src=b:o.includes("heavy")&&!o.includes("snow")?e.src=C:o.includes("snow")||o.includes("blizzard")||o.includes("ice")||o.includes("sleet")?e.src=S:o.includes("sunny")||o.includes("clear")?e.src=R:o.includes("thunder")&&(e.src=M)})},$=function(){const e=g.toLowerCase();T&&e.includes("clear")?s.style.backgroundImage=`url(${z})`:T&&(e.includes("cloudy")||e.includes("overcast"))?s.style.backgroundImage=`url(${U})`:e.includes("sunny")||e.includes("clear")?s.style.backgroundImage=`url(${N})`:e.includes("mist")||e.includes("fog")?s.style.backgroundImage=`url(${q})`:e.includes("cloudy")||e.includes("overcast")?s.style.backgroundImage=`url(${P})`:(e.includes("rain")||e.includes("drizzle"))&&!e.includes("thunder")?s.style.backgroundImage=`url(${x})`:e.includes("thunder")?s.style.backgroundImage=`url(${F})`:(e.includes("snow")||e.includes("blizzard")||e.includes("ice")||e.includes("sleet"))&&(s.style.backgroundImage=`url(${D})`)},r=function(e){const c={timeZone:e,hour12:!1,hour:"2-digit",minute:"2-digit",year:"numeric",month:"short",day:"numeric",weekday:"long"},k=new Intl.DateTimeFormat("en-EN",c).formatToParts(new Date),L={};return k.forEach(y=>{y.type!=="literal"&&(L[y.type]=y.value)}),L},i=function(){const e=r(n.getTimeZone),c=e.day,o=`${e.hour}:${e.minute}`,k=e.weekday,L=e.month,y=e.year.slice(2,4);return h.innerHTML=`${o} - ${k}, ${c} ${L} '${y}`};const n=await A(a);document.getElementById("max-temp").innerHTML=n.weekMax[0],document.getElementById("min-temp").innerHTML=n.weekMin[0],document.getElementById("humadity").innerHTML=n.humidityPercent,document.getElementById("cloudy").innerHTML=n.cloudPercent,document.getElementById("wind").innerHTML=n.windSpeed,document.querySelector(".today-weather__details-state").innerHTML=n.condition,document.querySelector(".fixed-data__temp").innerHTML=n.current;const d=n.hourNow,t=document.querySelectorAll(".today-weather__forecast-temp"),m=document.querySelectorAll(".today-weather__forecast-what"),v=document.querySelectorAll(".today-weather__forecast-time"),h=document.querySelector(".fixed-data__info-time"),w=document.querySelectorAll(".today-weather__forecast-img"),p=n.everyThreeHours,l=n.everyThreeHoursCondition,f=n.weatherForecastTime.map(e=>e>=1&&e<=9?`0${e}:${n.minNow}`:`${e}:${n.minNow}`),g=n.condition,s=document.querySelector(".body__bg"),u=document.querySelector(".fixed-data__img"),T=d>=21||d<=4;I(),_(),i(),$()}catch(n){console.error("Ошибка:",n)}}document.addEventListener("DOMContentLoaded",function(){const a=document.getElementById("citySelect");let n="Moscow";B(n),d(n),a.addEventListener("change",function(t){n=t.target.value,d(n),B(n)});function d(t){document.querySelector(".fixed-data__info-city").textContent=t}});
